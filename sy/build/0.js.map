{"version":3,"sources":["../../src/pages/task-near/task-near.module.ts","../../src/pages/task-near/task-near.ts"],"names":[],"mappings":"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","file":"0.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { TaskNearPage } from './task-near';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    TaskNearPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(TaskNearPage),\r\n  ],\r\n  exports:[TaskNearPage]\r\n})\r\nexport class TaskNearPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/task-near/task-near.module.ts","import { Component, OnInit } from '@angular/core';\r\nimport { IonicPage, NavController, ModalController } from 'ionic-angular';\r\nimport { mapUtils, LatLng } from '../../libriary/mapUtils';\r\nimport { GeoJsonUtil } from '../../libriary/GeoJsonUtil';\r\n/**\r\n * Generated class for the TaskNearPage page.\r\n *\r\n * See http://ionicframework.com/docs/components/#navigation for more info\r\n * on Ionic pages and navigation.\r\n */\r\n\r\ndeclare var L: any;\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-task-near',\r\n  templateUrl: 'task-near.html',\r\n})\r\n\r\nexport class TaskNearPage implements OnInit {\r\n  isShow = false;\r\n  // pageSlides: string[] = [\"测试1\", \"测试2\", \"测试3\", \"测试4\", \"测试5\", \"测试6\", \"测试7\", \"测试8\"];\r\n  pageNumber: number = 2;\r\n  slides: Array<{ title: string, image: any, name: string, distance: string }>;\r\n  private map: any;\r\n  private islarge: boolean = false;\r\n  private svgxml: string = 'assets/lib/images/method-draw-image.svg';\r\n  constructor(public navCtrl: NavController, public modalCtrl: ModalController) {\r\n    //   let svg = '<svg width=\"580\" height=\"400\" xmlns=\"http://www.w3.org/2000/svg\">'+\r\n    //   '<g>' +\r\n    //     '<title>background</title>' +\r\n    //     '<rect fill=\"#fff\" id=\"canvas_background\" height=\"402\" width=\"582\" y=\"-1\" x=\"-1\"/>' +\r\n    //    '<g display=\"none\" overflow=\"visible\" y=\"0\" x=\"0\" height=\"100%\" width=\"100%\" id=\"canvasGrid\">' +\r\n    //     '<rect fill=\"url(#gridpattern)\" stroke-width=\"0\" y=\"0\" x=\"0\" height=\"100%\" width=\"100%\"/>' +\r\n    //    '</g>' + \r\n    //   '</g>' +\r\n    //   '<g>' +\r\n    //    '<title>Layer 1</title>' + \r\n    //    '<ellipse ry=\"28.5\" rx=\"31.5\" id=\"svg_1\" cy=\"148.5\" cx=\"266\" stroke-width=\"1.5\" stroke=\"#000\" fill=\"#CE7975\"/>' +\r\n    //   '</g>' +\r\n    //  '</svg>';\r\n    //   this.svgxml = 'data:image/svg+xml;base64,' + window.btoa(decodeURIComponent(encodeURIComponent(svg))); //给图片对象写入base64编码的svg流    \r\n  }\r\n  ngOnInit() {\r\n    let curPosition = [23.129529, 113.380216];\r\n    let VectorBasemap = L.esri.basemapLayer('GoogleVex');\r\n    let VectorLayer = L.layerGroup([VectorBasemap]);\r\n\r\n    this.map = L.map('map', {\r\n      center: curPosition,\r\n      zoom: 14,\r\n      crs: L.CRS.EPSG3857,\r\n      attributionControl: false,\r\n      layers: [VectorLayer]\r\n      //zoomControl: false,\r\n    });\r\n    //地图定位\r\n    mapUtils.locate().then(\r\n      (latlng: LatLng) => {\r\n        curPosition = [latlng.latitude, latlng.longitude];\r\n        this.map.setView(curPosition, 14);\r\n      }).catch(\r\n      (err) => {\r\n        //TODO somthing wrong\r\n      });\r\n\r\n    //加载数据\r\n    this.getJson(\"assets/json/geojson.json\").then(\r\n      data => {\r\n        let geoJSON: any = data;\r\n        this.slides = geoJSON.features;\r\n        GeoJsonUtil.tramsformCoordinate(geoJSON.features);\r\n        let layer = L.geoJSON(geoJSON).addTo(this.map, {\r\n          style: function (feature) {\r\n            return {};\r\n          },\r\n          pointToLayer: function (geoJsonPoint, latlng) {\r\n            return L.marker(latlng);\r\n          }\r\n        }).bindPopup((layer) => {\r\n          let Element: HTMLElement = document.createElement(\"button\");\r\n          Element.innerHTML = \"详情\";\r\n          Element.onclick = this.showDetails;\r\n          return Element;\r\n          // return \"编号值:\" + layer.feature.properties.code;\r\n\r\n        });\r\n        this.map.fitBounds(layer.getBounds());\r\n        let tempP = [ 23.124008117101754,113.37358843143204];\r\n        let myIcon = L.icon({\r\n          iconUrl: 'assets/lib/images/mymarker.png',\r\n          iconSize: [48, 48],\r\n          iconAnchor: [24, 48],\r\n          shadowUrl: 'assets/lib/images/marker-shadow.png',\r\n          shadowSize: [68, 95],\r\n          shadowAnchor: [22, 94]\r\n        });\r\n        L.marker(tempP, {icon: myIcon}).addTo(this.map);\r\n\r\n      }).catch(\r\n      err => {\r\n        console.log(err);\r\n      });\r\n\r\n    // this.slides = [];\r\n    // for (let i = 0; i < 8; i++) {\r\n    //   this.slides.push({\r\n    //     title: '万科项目二' + i,\r\n    //     image: 'assets/img/wanke.jpg',\r\n    //     name: '刘伟',\r\n    //     distance: '1' + i + '公里'\r\n    //   })\r\n    // }\r\n  }\r\n  private getJson(path: string) {\r\n    // 在IE7下测试通过，IE6下必须创建 new ActiveXObject(\"MSXML2.XMLHTTP.6.0\")\r\n    return new Promise<any>((resolve, reject) => {\r\n      let request = new XMLHttpRequest();\r\n\r\n      request.open('GET', path);\r\n      request.onreadystatechange = () => {\r\n        if (request.readyState == 4 && request.status == 200) {\r\n          let objs = JSON.parse(request.responseText);\r\n          resolve(objs);\r\n        }\r\n      }\r\n      request.onerror = (err) => {\r\n        reject(err);\r\n      }\r\n      request.send(null);\r\n    });\r\n\r\n  }\r\n  private addMap() {\r\n    let modal = this.modalCtrl.create('MapAddressPage');\r\n    modal.onDidDismiss(data => {\r\n      console.log(data);\r\n    });\r\n    modal.present();\r\n  }\r\n  private enlarge() {\r\n    this.islarge = !this.islarge;\r\n  }\r\n\r\n  pointSearch() {\r\n    this.navCtrl.push('PointSearchPage')\r\n  }\r\n  showListModal() {\r\n    this.modalCtrl.create('TaskNearListPage', {}, {\r\n      //动画效果\r\n\r\n      enterAnimation: 'modal-from-bottom-enter',\r\n      leaveAnimation: 'modal-from-bottom-leave'\r\n\r\n\r\n    }).present();\r\n  }\r\n  showDetails = e=>{\r\n    this.navCtrl.push('TaskNearResourcesPage');\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/task-near/task-near.ts"],"sourceRoot":""}